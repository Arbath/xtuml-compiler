{
  "model_name": "Toko Online",
  "version": "1.1",
  "domains": [
    {
      "name": "ECommerce",
      "description": "Sistem Penjualan Online"
    }
  ],
  "classes": [
    {
      "name": "Customer",
      "domain_ref": "ECommerce",
      "attributes": [
        { "name": "id", "type": "int" },
        { "name": "name", "type": "str" },
        { "name": "email", "type": "str" }
      ],
      "methods": [
        {
          "name": "get_active_orders",
          "body": "// Menggunakan R1 (Binary)\nreturn this.R1_Order_placed_by;"
        }
      ]
    },
    {
      "name": "Order",
      "attributes": [
        { "name": "id", "type": "int" },
        { "name": "customer_id", "type": "int" },
        { "name": "status", "type": "str" },
        { "name": "total_amount", "type": "float" }
      ],
      "methods": [
        {
          "name": "calculate_total",
          "body": "// Menggunakan R2 (Linked/Associative)\nlet total = 0;\n// Kita akses OrderItem lewat R2\nconst items = this.R2_SideB_Product;\n// Logika iterasi..."
        }
      ],
      "state_model": [
        {
          "initial_state": "Created",
          "states": [ { "name": "Created" }, { "name": "Paid" } ],
          "transitions": [
            { "from": "Created", "event": "PaymentSuccess", "to": "Paid", "action": "update_status()" }
          ]
        }
      ]
    },
    {
      "name": "Product",
      "attributes": [
        { "name": "id", "type": "int" },
        { "name": "category_id", "type": "int" },
        { "name": "name", "type": "str" },
        { "name": "price", "type": "float" }
      ]
    },
    {
      "name": "OrderItem",
      "attributes": [
        { "name": "id", "type": "int" },
        { "name": "order_id", "type": "int" },
        { "name": "product_id", "type": "int" },
        { "name": "quantity", "type": "int" },
        { "name": "final_price", "type": "float" }
      ]
    },
    {
      "name": "Category",
      "attributes": [
        { "name": "id", "type": "int" },
        { "name": "parent_id", "type": "int" },
        { "name": "name", "type": "str" }
      ],
      "methods": [
        {
          "name": "get_subcategories",
          "body": "// Menggunakan R4 (Reflexive)\nreturn this.R4_Category_sub_kategori_dari;"
        }
      ]
    },
    {
      "name": "Payment",
      "attributes": [
        { "name": "id", "type": "int" },
        { "name": "order_id", "type": "int" },
        { "name": "amount", "type": "float" },
        { "name": "date", "type": "datetime" }
      ]
    },
    {
      "name": "CreditCard",
      "attributes": [
        { "name": "card_number", "type": "str" },
        { "name": "cvv", "type": "str" }
      ]
    },
    {
      "name": "BankTransfer",
      "attributes": [
        { "name": "bank_name", "type": "str" },
        { "name": "va_number", "type": "str" }
      ]
    }
  ],
  "events": [
    { "name": "PaymentSuccess", "trigger": "Order", "action": "ship_items()" }
  ],
  "associations": [
    {
      "rel_id": "R1",
      "type": "binary",
      "side_a": {
        "class": "Customer",
        "mult": "1",
        "phrase": "melakukan"
      },
      "side_b": {
        "class": "Order",
        "mult": "0..*",
        "phrase": "dilakukan oleh"
      }
    },
    {
      "rel_id": "R2",
      "type": "linked",
      "side_a": {
        "class": "Order",
        "mult": "0..*",
        "phrase": "berisi"
      },
      "side_b": {
        "class": "Product",
        "mult": "0..*",
        "phrase": "termasuk dalam"
      },
      "link_class": "OrderItem"
    },
    {
      "rel_id": "R3",
      "type": "generalization",
      "superclass": "Payment",
      "subclasses": [
        "CreditCard",
        "BankTransfer"
      ]
    },
    {
      "rel_id": "R4",
      "type": "binary",
      "side_a": {
        "class": "Category",
        "mult": "0..1",
        "phrase": "induk dari"
      },
      "side_b": {
        "class": "Category",
        "mult": "0..*",
        "phrase": "sub kategori dari"
      }
    }
  ]
}